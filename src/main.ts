import {
  VIEWPORT_TILE_HEIGHT,
  VIEWPORT_TILE_WIDTH,
  TILE_SIZE,
} from '~/constants'
import { Game } from '~/Game'

const canvas = document.createElement('canvas')
document.body.appendChild(canvas)

const viewportWidth = TILE_SIZE * VIEWPORT_TILE_WIDTH
const viewportHeight = TILE_SIZE * VIEWPORT_TILE_HEIGHT

canvas.width = viewportWidth
canvas.height = viewportHeight

const map = {
  playfield: `
....~.........~.........~.........~.........~.........
....~.........~.........~.........~.........~.........
.^..~......^..~......^..~......^..~......^..~......^..
....~.........~.........~.........~.........~.........
....~~~~~~....~~~~~~....~~~~~~....~~~~~~....~~~~~~....
......^.........^.........^.........^.........^.......
.....^^........^^........^^........^^........^^.......
....^^^.......^^^.......^^^.......^^^.......^^^.......
.....^^^.......^^^.......^^^.......^^^.......^^^......
.....^.........^.........^.........^.........^........
....~.........~.........~.........~.........~.........
....~.........~.........~.........~.........~.........
.^..~......^..~......^..~......^..~......^..~......^..
....~.........~.........~.........~.........~.........
....~~~~~~....~~~~~~....~~~~~~....~~~~~~....~~~~~~....
......^.........^.........^.........^.........^.......
.....^^........^^........^^........^^........^^.......
....^^^.......^^^.......^^^.......^^^.......^^^.......
.....^^^.......^^^.......^^^.......^^^.......^^^......
.....^.........^.........^.........^.........^........
....~.........~.........~.........~.........~.........
....~.........~.........~.........~.........~.........

`,
  entities: `
..........
..........
..........
..........
.w........
.wwww.....
.w........
.w........
......p...
..........
`,
}

const ctx = canvas.getContext('2d')
const game = new Game(map, [viewportWidth, viewportHeight])

function gameLoop() {
  requestAnimationFrame(gameLoop)
  game.update()
  game.render(ctx)
}

gameLoop()
